services:
    ekklipse:
        platform: linux/amd64 # Backend requires amd64
        image: ekkolyth/ekklipse:dev
        container_name: ekklipse
        ports:
            - "${WEBUI_PORT:-3000}:3000" # Frontend
            - "${API_PORT:-3210}:3210" # Backend API
        environment:
            - APP_URL=http://192.168.1.100
            - API_PORT=${API_PORT:-3210}
            - WEBUI_PORT=${WEBUI_PORT:-3000}
        env_file:
            - .env
        volumes:
            - ekklipse-data:/convex/data
        restart: unless-stopped

volumes:
    ekklipse-data:
        driver: local
